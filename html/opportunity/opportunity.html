<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
	<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" href="../../css/iuapmobile.um.css">
	<link rel="stylesheet" href="../../css/fonts/iconfont.css">
	<link rel="stylesheet" href="opportunity.css">
	<script src="../../js/summer.js"></script>
	<script src="../../js/jquery.min.js"></script>
	<script src="../../js/Frameworks/iuapmobile.frameworks.ui.js"></script>
	<script src="../../js/font.js"></script>
	<script src="../../js/vue.js"></script>
	<script src="../../js/common.js"></script>
</head>

<body>
	<div class="um-win" id="index">
		<div v-bind:class="maskStyle">
			<ul v-bind:class="stateStyle">
				<li>
					<dl>
						<dt>售前</dt>
						<dd>收集客户信息</dd>
					</dl>
				</li>
				<li>
					<dl>
						<dt></dt>
						<dd>申请上线</dd>
					</dl>
				</li>
				<li>
					<dl>
						<dt></dt>
						<dd>赢单</dd>
					</dl>
				</li>
				<li>
					<dl>
						<dt></dt>
						<dd>输单</dd>
					</dl>
				</li>
				<li>
					<dl>
						<dt></dt>
						<dd>无效</dd>
					</dl>
				</li>
				<li>
					<dl>
						<dt>售后</dt>
						<dd>售后回访</dd>
					</dl>
				</li>
				<li>
					<dl>
						<dt></dt>
						<dd>逾期催收</dd>
					</dl>
				</li>
			</ul>
		</div>
		<div class="um-header-light">
			<div class="sera">
				<div class="s-box" onclick="opensearch()">
					<i class="iconfont icon-search"> </i>
					<p class="txt">
						搜索商机
					</p>
				</div>
			</div>
		</div>
		<div class="um-content">
			<div id="content"></div>
			<div class="headBar">
				<div class="headItems" @click="showState">阶段</div>
				<div class="headItems">排序</div>
				<div class="headItems">筛选</div>
			</div>
			<ul class="opportunity">
				<li class="opportunityItems" v-for="item in datas" @click="oppDetail">
					<div class="leftCon">
						<dl>
							<dt>
								<span>{{item.process}}</span>
							</dt>
							<dd>
								<p class="p1">{{item.txt1}}</p>
								<p class="p2">{{item.txt2}}</p>
								<p class="p3">{{item.txt3}}</p>
								<p class="p4">{{item.txt4}}</p>
							</dd>
						</dl>
					</div>
					<div class="rightCon">
						<div>
							<p class="p1">{{item.txt5}}</p>
							<p class="p2">{{item.txt6}}</p>
						</div>
					</div>
				</li>
			</ul>
		</div>
		<!-- <div class="um-footer">
			<button type="button" @click="createOpp">新建商机</button>
		</div> -->
	</div>
</body>
<script type="text/javascript">
	var data = [{
			process: "1/3",
			txt1: "测试",
			txt2: "只是测试",
			txt3: "售前阶段1 收集客户信息",
			txt4: "售后 未开启",
			txt5: "2017年09月22日",
			txt6: "10.00元"
		},
		{
			process: "2/3",
			txt1: "测试",
			txt2: "只是测试",
			txt3: "售前阶段1 收集客户信息",
			txt4: "售后 未开启",
			txt5: "2017年09月22日",
			txt6: "100.00元"
		},
		{
			process: "3/3",
			txt1: "测试",
			txt2: "只是测试",
			txt3: "售前阶段1 收集客户信息",
			txt4: "售后 未开启",
			txt5: "2017年09月22日",
			txt6: "1000.00元"
		},
		{
			process: "3/3",
			txt1: "测试",
			txt2: "只是测试",
			txt3: "售前阶段1 收集客户信息",
			txt4: "售后 未开启",
			txt5: "2017年09月22日",
			txt6: "1000.00元"
		},
		{
			process: "3/3",
			txt1: "测试",
			txt2: "只是测试",
			txt3: "售前阶段1 收集客户信息",
			txt4: "售后 未开启",
			txt5: "2017年09月22日",
			txt6: "1000.00元"
		},
		{
			process: "3/3",
			txt1: "测试",
			txt2: "只是测试",
			txt3: "售前阶段1 收集客户信息",
			txt4: "售后 未开启",
			txt5: "2017年09月22日",
			txt6: "1000.00元"
		}
	];
	var opportunity = new Vue({
		el: '#index',
		data: {
			datas: data,
			state: false,
			sort: false,
			choose: false
		},
		methods: {
			showState: function () {
				this.state = !this.state;
				this.sort = false;
				this.choose = false;
			},
			createOpp: function () {
				summer.openWin({
					id: 'createOpp',
					url: 'html/opportunity/createOpp.html',
					create: false,
					type: 'actionBar',
					actionBar: {
						title: "新建商机",
						titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
						backgroundColor: "#039be5",
						leftItem: {
							image: "img/back.png",
							method: "", //返回按钮自定义事件
							text: "取消",
							textColor: "#ffffff" //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
						},
						rightItems: [{
							type: "text",
							text: "提交",
							textColor: "#ffffff",
							method: "createOpp.createNewOpp()"
						}]
					}
				})
			},
			oppDetail: function () {
				summer.openWin({
					id: 'oppDetail',
					url: 'html/opportunity/oppDetail.html',
					create: false,
					type: 'actionBar',
					actionBar: {
						title: "商机详情",
						titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
						backgroundColor: "#039be5",
						leftItem: {
							image: "img/back.png",
							method: "", //返回按钮自定义事件
							text: "返回",
							textColor: "#ffffff" //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
						},
						rightItems: [{
							type: "text",
							text: "编辑",
							textColor: "#ffffff",
							method: "oppDetail.changeOpp()"
						}]
					}
				})
			}
		},
		computed: {
			maskStyle: function () {
				return {
					maskActive: this.state || this.sort || this.choose,
					mask: true
				}
			},
			stateStyle: function () {
				return {
					stateActive: this.state,
					state: true
				}
			}
		}
	});
	summerready = function () {
		// 搜索
		function opensearch() {
			summer.setStorage("searchFromSource", "opportunity");
			summer.openWin({
				id: 'search',
				url: 'html/fastReport/search.html',
			});
		};
		// 上拉下拉刷新
		/* summer.setRefreshHeaderInfo({
			visible: true,
			loadingImg: 'img/refresh.png',
			bgColor: '#ffffff',
			textColor: '#aaaaaa',
			textDown: '下拉刷新...',
			textUp: '松开刷新...',
			showTime: true
		}, function(ret, err) {
			//通常在这里从服务器加载数据
			summer.refreshHeaderLoadDone(); //加载完成后调用方法恢复组件到默认状态
		});
		summer.setRefreshFooterInfo({
			visible: true,
			loadingImg: 'img/refresh.png',
			bgColor: '#ffffff',
			textColor: '#aaaaaa',
			textDown: '上拉刷新...',
			textUp: '松开刷新...',
			showTime: true
		}, function(ret, err) {
			//通常在这里从服务器加载数据，
			summer.refreshFooterLoadDone(); //加载完成后调用方法恢复组件到默认状态
		}); */
	}
</script>

</html>